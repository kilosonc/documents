我们是来自网易云音乐的云原生团队。我们平常的工作是运维一个基于 GitOps 的 CICD 平台—— Horizon。Horizon 中，有许多的管控组件，这些管控组件的运维也是有很多问题。我们需要解决，尽量减少运维出错，出错后能够快速恢复，大量组件运维要求我们，能够多人协作，提高自动化水平等等。

## 管控面运维

为了解决以上提到的问题，云原生团队内部管控组件部署，实现了一套基于 Gitlab CI 的 GitOps 部署规范流程。云原生团队内部，每个线上运行的组件都有一个对应的代码仓库和部署仓库。开发者将修改推到代码仓库后，通过review合入主分支，打出对应的镜像。只需要修改 GitOps 部署仓库，就能将修改部署到线上。

首先开发者需要 Fork 一份部署仓库的代码，部署仓库一般为 [Helm](https://helm.sh/) Chart。

![[Pasted image 20230606193220.jpg]]